IO1DIR          EQU   0xE0028018
PINSEL0         EQU   0xE002C000
EXTMODE         EQU  0xE01FC148
EXTPOLAR        EQU  0xE01FC14C
VICVectCntl0    EQU   0xFFFFF200
VICVectAddr0    EQU   0xFFFFF100
VICIntEnable    EQU   0xFFFFF010
EXTINT          EQU  0xE01FC140
VICVectAddr     EQU   0xFFFFF030
IO1PIN          EQU   0xE0028010

	AREA INTERR,CODE,READONLY
	EXPORT __main
__main
	ENTRY
		LDR R1,=IO1DIR
		LDR R0,=0X02000000
		STR R0,[R1]
		LDR R1,=PINSEL0
		LDR R0,=0XC0
		STR R0,[R1]
		LDR R1,=EXTMODE
		LDR R0,=0X02
		STR R0,[R1]
		LDR R1,=EXTPOLAR
		LDR R0,=0X0
		STR R0,[R1]
		LDR R1,=VICVectCntl0
		LDR R0,=0X2F
		STR R0,[R1]
		LDR R1,=VICVectAddr0
		LDR R0,=IRQ_EInt1
		STR R0,[R1]
		LDR R1,=VICIntEnable
		LDR R0,=0X00008000
		STR R0,[R1]
S	B	S
IRQ_EInt1
		STMDB R13!,{R0-R1}
		LDR R1,=EXTINT
		LDR R0,=0X2
		STR R0,[R1]
		LDR R2,=0X40000000
		LDR R0,[R2]
		LDR R1,=IO1PIN
		EOR R0,R0,#0X02000000
		STR R0,[R1]
		STR R0,[R2]
		LDR R1,=VICVectAddr
		LDR R0,=0
		STR R0,[R1]
		LDMIA R13!,{R0-R1}
		SUBS PC,R14,#4
		END